// Generated by IcedCoffeeScript 1.7.1-g
(function() {
  var handlers, newConnection;

  handlers = {
    "ConnectionCount": function(eventValue) {
      return $('#node-count').html(eventValue);
    }
  };

  newConnection = function() {
    var connection;
    connection = new WebSocket('ws://torchlight.sheldonth.com/ws/');
    connection.onopen = function() {
      return console.log("onopen");
    };
    connection.onerror = function(error) {
      console.log("onerror");
      return console.log(error);
    };
    connection.onmessage = function(e) {
      var event, handler;
      event = JSON.parse(e.data);
      if ((handler = handlers[event.event_type])) {
        return handler(event.value);
      }
    };
    return connection;
  };

  $(document).ready(function() {
    var websock;
    return websock = newConnection();
  });

}).call(this);
